(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{96167:function(e,t,r){Promise.resolve().then(r.bind(r,41526))},41526:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(57437),a=r(2265),l=r(16873),n=r(56115),i=r(54168),c=r(48714),o=r(33617),d=r(66939),h=r(69569),m=r(71423),x=r(46682),u=r(7237),j=r(27776),p=r(38472);let{Title:Z}=i.default;function g(){let[e]=c.Z.useForm(),[t,r]=(0,a.useState)(""),[i,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let t=await p.Z.get("".concat((0,u.I)(),"/config"),{});if(!t.data)throw Error("Server responded with an error. Please check the server status or contact support.");let r=await t.data;return g(r),e.setFieldsValue(r),"ok"}catch(e){console.error("Error fetching user data:",e)}})().then(e=>console.log(e))},[e]),(0,a.useEffect)(()=>{i&&e.setFieldsValue(i)},[i,e]);let b=async e=>{try{if(!(await p.Z.post("".concat((0,u.I)(),"/config"),e,{headers:{"Content-Type":"application/json"}})).data)throw Error("Server responded with an error. Please check the server status or contact support.");j.Am.success("Configuration saved!")}catch(e){console.error("Failed to fetch data:",e)}};return(0,s.jsx)("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"24px",backgroundColor:"#f0f2f5"},children:(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(Z,{level:2,style:{textAlign:"center",marginBottom:"24px"},children:"Watchdog Configuration"}),(0,s.jsxs)(c.Z,{form:e,onValuesChange:e=>{g(e)},onFinish:b,layout:"vertical",children:[(0,s.jsxs)(c.Z.Item,{children:[(0,s.jsx)(c.Z.Item,{name:["server","Http","http_port"],label:"HTTP Port",children:(0,s.jsx)(d.Z,{disabled:!0})}),(0,s.jsx)(c.Z.Item,{name:["server","Https","https_port"],label:"HTTPS Port",children:(0,s.jsx)(d.Z,{disabled:!0})}),(0,s.jsx)(c.Z.Item,{name:["server","Https","cert_path"],label:"HTTPS Cert Path",children:(0,s.jsx)(h.Z,{disabled:!0})}),(0,s.jsx)(c.Z.Item,{name:["server","Https","key_path"],label:"HTTPS Key Path",children:(0,s.jsx)(h.Z,{disabled:!0})}),(0,s.jsx)(c.Z.Item,{name:["server","external"],label:"External",valuePropName:"checked",children:(0,s.jsx)(m.Z,{disabled:!0})})]}),(0,s.jsx)(c.Z.Item,{name:"scrapeInterval",label:"Scrape Interval",children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(c.Z.Item,{label:"Hosts",children:(0,s.jsx)(c.Z.List,{name:"hosts",children:(e,t)=>{let{add:r,remove:a}=t;return(0,s.jsxs)(s.Fragment,{children:[e.map(e=>{let{key:t,name:r,...n}=e;return(0,s.jsxs)("div",{style:{display:"flex",marginBottom:8},children:[(0,s.jsx)(c.Z.Item,{...n,name:[r,"IP"],rules:[{required:!0,message:"IP is required"}],children:(0,s.jsx)(h.Z,{placeholder:"IP"})}),(0,s.jsx)(c.Z.Item,{...n,name:[r,"Port"],rules:[{required:!0,message:"Port is required"}],children:(0,s.jsx)(h.Z,{placeholder:"Port"})}),(0,s.jsx)(c.Z.Item,{...n,name:[r,"CAPath"],children:(0,s.jsx)(h.Z,{placeholder:"CA Path"})}),(0,s.jsx)(c.Z.Item,{...n,name:[r,"CertPath"],children:(0,s.jsx)(h.Z,{placeholder:"Cert Path"})}),(0,s.jsx)(c.Z.Item,{...n,name:[r,"KeyPath"],children:(0,s.jsx)(h.Z,{placeholder:"Key Path"})}),(0,s.jsx)(l.Z,{onClick:()=>a(r)})]},t)}),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(x.ZP,{type:"dashed",onClick:()=>r(),block:!0,icon:(0,s.jsx)(n.Z,{}),children:"Add Host"})})]})}})}),(0,s.jsxs)(c.Z.Item,{label:"Alert Configuration",children:[(0,s.jsx)(c.Z.Item,{name:["alert","enable"],valuePropName:"checked",children:(0,s.jsx)(m.Z,{})}),(0,s.jsx)(c.Z.Item,{label:"Webhooks",children:(0,s.jsx)(c.Z.List,{name:["alert","webhook"],children:(e,t)=>{let{add:r,remove:a}=t;return(0,s.jsxs)(s.Fragment,{children:[e.map(e=>{let{key:t,name:r,...n}=e;return(0,s.jsxs)("div",{style:{display:"flex",marginBottom:8},children:[(0,s.jsx)(c.Z.Item,{...n,name:r,rules:[{required:!0,message:"Webhook is required"}],children:(0,s.jsx)(h.Z,{placeholder:"Webhook URL"})}),(0,s.jsx)(l.Z,{onClick:()=>a(r)})]},t)}),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(x.ZP,{type:"dashed",onClick:()=>r(),block:!0,icon:(0,s.jsx)(n.Z,{}),children:"Add Webhook Url"})})]})}})}),(0,s.jsxs)(c.Z.Item,{label:"Email Configuration",children:[(0,s.jsx)(c.Z.Item,{name:["alert","Email","smtp_endpoint"],label:"SMTP Endpoint",children:(0,s.jsx)(h.Z,{})}),(0,s.jsx)(c.Z.Item,{name:["alert","Email","smtp_port"],label:"SMTP Port",children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(c.Z.Item,{name:["alert","Email","smtp_account"],label:"SMTP Account",children:(0,s.jsx)(h.Z,{})}),(0,s.jsx)(c.Z.Item,{name:["alert","Email","smtp_password"],label:"SMTP Password",children:(0,s.jsx)(h.Z.Password,{})}),(0,s.jsx)(c.Z.Item,{label:"Receivers",children:(0,s.jsx)(c.Z.List,{name:["alert","Email","receiver"],children:(e,t)=>{let{add:r,remove:a}=t;return(0,s.jsxs)(s.Fragment,{children:[e.map(e=>{let{key:t,name:r,...n}=e;return(0,s.jsxs)("div",{style:{display:"flex",marginBottom:8},children:[(0,s.jsx)(c.Z.Item,{...n,name:r,rules:[{required:!0,message:"Receiver email is required"}],children:(0,s.jsx)(h.Z,{placeholder:"Receiver Email"})}),(0,s.jsx)(l.Z,{onClick:()=>a(r)})]},t)}),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(x.ZP,{type:"dashed",onClick:()=>r(),block:!0,icon:(0,s.jsx)(n.Z,{}),children:"Add Receiver"})})]})}})})]})]}),(0,s.jsx)(c.Z.Item,{children:(0,s.jsx)(x.ZP,{type:"primary",htmlType:"submit",style:{position:"absolute",right:10,bottom:10},children:"Save"})})]})]})})}},7237:function(e,t,r){"use strict";r.d(t,{I:function(){return s},c:function(){return a}});let s=()=>"http://127.0.0.1:13080";function a(e){let t=new Date(1e3*e),r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0");return"".concat(r,"-").concat(s,"-").concat(a," ").concat(l,":").concat(n,":").concat(i)}}},function(e){e.O(0,[807,543,971,23,744],function(){return e(e.s=96167)}),_N_E=e.O()}]);